<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>ECE 5160 Portfolio By Zechen</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="images/fevicon.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
   </head>
   <!-- body -->
   <body class="main-layout">
      <!-- loader  -->
<!--       <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="#" /></div>
      </div> -->
      <!-- end loader --> 
      <!-- header -->
      <header>
         <!-- header inner -->
         <div class="header">
         <div class="container">
            <div class="row">
               <div class="col-xl-6 col-lg-3 col-md-3 col-sm-3 col logo_section">
                  <div class="full">
                     <div class="center-desk">
                        <div class="logo"> <a href="index.html">ECE 5160 Fast Robot</a> </div>
                     </div>
                  </div>
               </div>
               <div class="col-xl-6 col-lg-9 col-md-9 col-sm-9">
                  <div class="menu-area">
                     <div class="limit-box">
                        <nav class="main-menu">
                           <ul class="menu-area-main">
                              <li class="active"> <a href="#">Home</a> </li>
                              <li> <a href="#about">About</a> </li>
                              <li> <a href="#labs">Lab Reports</a> </li>
                              <li> <a href="#pics">Gallery</a> </li>
                           </ul>
                        </nav>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- end header inner --> 
      </header>
      <!-- end header -->
<!-- about  -->
      <div id="about" class="about">
         <div class="container">
            <div class="row">
               <div class="col-md-12">
                  <div class="titlepage">
                     <h2>About</h2>
                        <span>
                              This website is the portfolio for the course ECE 5160: Fast Robot at Cornell University, Spring 2023 <br>
                              Instructor: Prof. Kirstin Petersen<br><br>
                              <img class="img-rounded" src="assets/profile.png" alt="profile image" style="width:25%;"><br>
                              Hey! My name is Zechen Wang, an MEng student in the ECE Department. <br>
                              I got my bachelor's degree in Computer Engineering and Computer Science at USC,<br>
                              and I am really interested in embedded systems, robotics, and IoT devices. Contact me at &ltzw652&gt!<br><br>


                              <em>This site is still under construction.<br>Maybe you'll see something prettier next time!</em>
                              <a href="https://cei-lab.github.io/FastRobots-2023/" target="_blank">Course Website</a>
                              <a href="https://github.com/zechenwang00/ECE-5160-Sp23" target="_blank">Github Repo</a>
                        </span>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- end abouts -->

<!-- service --> 
      <div id="labs" class="service">
         <div class="container">
            <div class="row">
               <div class="col-md-12">
                  <div class="titlepage">
                     <h2>Labs </h2>
                     <div>
                             <details>
                             <summary style="text-align:left;font-weight: bold; color:#fc4311;font-size: 24px;text-decoration:underline;">Lab 1: Setup</summary>
<!--                              <h3 style="text-align:left;font-weight: bold; color:#fc4311;">Lab 1</h3> -->
                             <h4 style="text-align:left;font-weight: bold;"><br>Introduction</h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    This lab is the first assignment aimed to let students set up and become familiar with the Arduino IDE and 
                                    the hardware component Artemis Nano which we will be using throughout the semester. The tasks in this lab 
                                    assignment include reading relevant datasheets, configuring the IDE, compiling and uploading programs to 
                                    the board, and performing tests on the board by viewing outputs from the serial interface.<br>
                                    <em>Note: This lab assignment also includes the 5000-level tasks.<br><br></em>
                                 </p>
                              <h4 style="text-align:left;font-weight: bold;">Example I: Blink</h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    The first demonstrable result is to have the Artemis Nano board loaded with an example blink program, and
                                    to verify the LED blinking. The example blinking program has one single function of toggling an onboard LED 
                                    every 450 miliseconds (900ms as a period). The results have been recorded in the following video: <br>
                                    <br><br>
                                 </p>
                                 <video width=60%; controls>
                                    <source src="assets/lab1/blink.mp4" type=video/mp4>
                                 </video><br><br>
                              <h4 style="text-align:left;font-weight: bold;">Example II: Serial</h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    In this part of the lab, we load program the board using a serial communication example code and test the 
                                    interface on Arduino IDE. The program first prints out several debug messages and then proceeds to enter a 
                                    echo mode, which simply sends whatever message the board receives back to the PC. In the following video, 
                                    we could see that two messages "new msg" and "test2" were succesfully sent to the Artemis board and echoed 
                                    back to the serial interface.<br><br>
                                 </p>
                                 <video height=640px; controls>
                                    <source src="assets/lab1/serial.mp4" type=video/mp4>
                                 </video><br><br> 
                              <h4 style="text-align:left;font-weight: bold;">Example III: Temperature</h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    The third part of this lab is to test the functionality of the internal temperature sensor on the Artemis 
                                    board. After loading an example temperature reading program, we could directly fetch the readings from the
                                    temperature sensor through an serial interface which we tested in the previous part. The process of changing 
                                    the temperature was taking a considerable amount of time, as I was simply using my hands to transfer some heat. 
                                    From the video below, you could see the readings from the temperature sensor increasing slowly. 
                                    (you may want to fast forward a little bit!)<br><br>
                                 </p>
                                 <video height=640px; controls>
                                    <source src="assets/lab1/temp.mp4" type=video/mp4>
                                 </video><br><br>
                              <h4 style="text-align:left;font-weight: bold;">Example IV: Microphone</h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    The last part of this lab is to test the microphone on the Artemis board. A microphone testing example program
                                    is provided to print out the strongest audio signal in the frequency spectrum. The program will sample from the
                                    microphone, perform a fast Fourier transform(FFT), and then pick out the signal with the highest intensity. <br><br>
                                    For the 5000-level task, the program should also behave as an electronic tuner, that responds to musical "A" notes. 
                                    Specifically, my program would respond to "A" notes in different octaves(A1 to A8), but due to environmental noise 
                                    I could only demonstrate some of them (A4, A5, A6). In addition, I found out that the program will freeze entirely 
                                    when a delay function is used to toggle the LED. To solve that, I implemented a non-blocking LED blinking mechanism 
                                    by reading time from the internal clock, so that the program would simply check if the LED should be toggled during 
                                    every iteration in the main loop.<br><br>
                                 </p>
                                 <video height=640px; controls>
                                    <source src="assets/lab1/mic.mp4" type=video/mp4>
                                 </video><br><br>
                                 <pre>
                                    <code>
// non-blocking delay LED blinker reference: https://docs.arduino.cc/built-in-examples/digital/BlinkWithoutDelay
// full program included in github repo, Lab1 folder

if (currentMillis - previousMillis >= interval) {
   previousMillis = currentMillis;
   digitalWrite(LED_BUILTIN, LOW);
}
                                    </code> 
                                 </pre>
                              </details>


                             <details>
                             <summary style="text-align:left;font-weight: bold; color:#fc4311;font-size: 24px;text-decoration:underline;">Lab 2: BLE</summary>
<!--                              <h3 style="text-align:left;font-weight: bold; color:#fc4311;">Lab 2</h3> -->
                             <h4 style="text-align:left;font-weight: bold;"><br><u>Introduction</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    This lab includes various tasks related to the use of bluetooth to establish connection between the Artemis 
                                    board and our computer. On the Artemis side, we would need to modify the .ino files in order to implement 
                                    customized commands which can be processed on board. On the pc side, we need to design software handlers which 
                                    processes different kinds of information sent back from the artemis board, extracts useful information, and 
                                    formats output. After implementing and testing various functions/commands, we will also test the efficiency 
                                    and reliability of data transmission by sending data packets of various sizes. (5000-level assignment)
                                 </p>
                                 <img class="img-rounded" src="assets/lab2/BLE.png" alt="BLE image" style="width:20%; text-align: center;"><br>
                              <h4 style="text-align:left;font-weight: bold;"><u>Prelab</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    Before starting to work on any of the lab tasks, we want to make sure we can establish a stable connection between 
                                    the BLE device and our PC. First we want to copy the hardware MAC address of our device, and generate a unique 
                                    identifier to be placed in a configuration file. Change the first two lines in the following file:
                                 </p>
                                 <br>
                                 <img class="img-rounded" src="assets/lab2/settings.png" alt="settings image" style="width:50%;"><br>
                                 <figcaption style="font-size: 16px;"><em>connection settings on PC</em></figcaption>
                                 <br>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    Then we will be ready for the connection! After establishing the connection, the Artemis side and the PC side will 
                                    work together to transmit/receive information. How a typical task will be done is: <br><br>
                                    1. PC sends command to Artemis<br>
                                    2. Artemis receives command and does some processing<br>
                                    3. Artemis send data back to PC<br>
                                    4. PC process or display data<br>
                                 </p>
                              <h4 style="text-align:left;font-weight: bold;"><br><u>Jupyter Notebook</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                 <a href="assets/lab2/zechen_lab2.ipynb" download target="_blank" style="color:blue"><u>click to download file</u></a>
                                 </p>
                              <h4 style="text-align:left;font-weight: bold;"><br><u>Task 1: Echo Command</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    Echo command simply lets Artemis echo back a message from the PC. We first need to send an echo command with a payload string 
                                    to Artemis. After receiving the string, Artemis replies back the same string to the PC. While on the PC side, we woud need to 
                                    call a function to receive such string and print it to the console. <br><br>
                                    In the below output, we want to first verify that the Artemis board was successfully connected to our PC by confirming the mac 
                                    address and a 'PONG' reply to our PING command. After that, we send a 'hi' to the Artemis board, and confirmed an echo message 
                                    both on the Artemis board and on the PC console.<br><br>
                                 </p>
                                 <div class="row" style="text-align: center;">
                                   <div class="column2">
                                     <img src="assets/lab2/step1_nano.png" alt="s1nano" style="width:80%">
                                     <figcaption style="font-size: 16px;"><em>serial output from Artemis</em></figcaption>
                                   </div>
                                   <div class="column2">
                                     <img src="assets/lab2/step1_pc.png" alt="s1pc" style="width:100%">
                                     <figcaption style="font-size: 16px;"><em>sending and receiving data on PC</em></figcaption>
                                   </div>
                                 </div>
                              <h4 style="text-align:left;font-weight: bold;"><br><u>Task 2: Get Time</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                    For the second task, we want to implement a command <em>GET_TIME_MILLIS</em> which lets the Artemis read the current time from 
                                    its clock on board (miliseconds since boot up) and send that number back to the PC as a string. We frist want to do it without 
                                    any function handlers, meaning that we will manually send and receive the string to verify it working properly.<br><br>
                                    <b>On the Artemis side</b>, we need to implement a function to format the current time into a string for transmission. The code snippet 
                                    for such function is attatched below to the left. After sending the command from the PC, we could also verify the string via the 
                                    serial interface (screenshot on the lower right).
                                    <br><br>
                                 </p>
                                 <div class="row" style="text-align: center;">
                                   <div class="column2">
                                     <img src="assets/lab2/step2_nano_code.png" alt="s2nanocode" style="width:100%">
                                     <figcaption style="font-size: 16px;"><em>code snippet of GET_TIME_MILLIS on Artemis</em></figcaption>
                                   </div>
                                   <div class="column2">
                                     <img src="assets/lab2/step2_nano.png" alt="s2nano" style="width:60%">
                                     <figcaption style="font-size: 16px;"><em>serial output from Artemis</em></figcaption>
                                   </div>
                                 </div>
                                 <br>

                                 <p style="text-align: left;padding: 0px 30px;">
                                    <b>On the PC side</b>, we would need to send the command we just created, and then manually receive the time string with a receive_string 
                                    command. We could automate this process in the subsequent steps.
                                    <br><br>
                                 </p>
                                 <img class="img-rounded" src="assets/lab2/step2_pc.png" alt="step2pc" style="width:60%";><br>
                                 <figcaption style="font-size: 16px;"><em>sending and receiving time string on PC</em></figcaption>
                                 <br>

                              <h4 style="text-align:left;font-weight: bold;"><br><u>Task 3: Notification Handler</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                 By setting up a notification handler function, we would be able to automate the receiving and processing procedure every time after sending 
                                 a command. Specifically, we want to define a function that will be called whenever we receive a string from the PC side. Then we use the 
                                 start_notify function in BLE to automatically trigger the function we just defined whenever a new string is received. In this case, our function 
                                 simply decodes the byte array into a string and then interpret the time by splitting it at the ":" character.
                                 <br><br>
                                 </p>
                                 <img class="img-rounded" src="assets/lab2/step3_pc.png" alt="step3pc" style="width:50%";><br>
                                 <figcaption style="font-size: 16px;"><em>defining and using callback functions</em></figcaption>
                                 <br><br>

                              <h4 style="text-align:left;font-weight: bold;"><br><u>Task 4: Get Temperature Command</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                 In this section we would want to implement functions to request temperature data on the Artemis board. First we would like to sample 5 times 
                                 within five seconds, then we proceed to sample for the entire five seconds without any stopping.<br><br>
                                 <b>On the Artemis side</b>, we need to implement a function to sample five times upon receving the request. The results would be formatted into 
                                 a string for transmission with pairs of timestamp and temperature data. The following code snippet to the left is the function implemented in 
                                 arduino, and the output screenshot to the right shows the actual output string being transmitted to PC.
                                 </p>
                                 <br><br>

                                 <div class="row" style="text-align: center;">
                                   <div class="column2">
                                     <img src="assets/lab2/step4_nano_code.png" alt="s4nanocode" style="width:80%">
                                     <figcaption style="font-size: 16px;"><em>code snippet of GET_TIME_MILLIS on Artemis</em></figcaption>
                                   </div>
                                   <div class="column2">
                                     <img src="assets/lab2/step4_nano.png" alt="s4nano" style="width:100%">
                                     <figcaption style="font-size: 16px;"><em>serial output from Artemis</em></figcaption>
                                   </div>
                                 </div>
                                 <br>

                                 <p style="text-align: left;padding: 0px 30px;">
                                    <b>On the PC side</b>, we would like to keep what we have done in the previous task -- use a callback function to automatically receive and 
                                    process strings from Artemis. Specifically, we split each pair of data by the "|" separator, and then further separate time and temperature 
                                    by the ":" separator. After extracting the useful information, we print them to the console. A code snippet and an example processed output will 
                                    be included in the following screenshot.
                                 </p>
                                 <br>
                                 <img class="img-rounded" src="assets/lab2/step4_pc.png" alt="step4pc" style="width:50%";><br>
                                 <figcaption style="font-size: 16px;"><em>callback and output for temperature reading</em></figcaption>
                                 <br>

                              <h4 style="text-align:left;font-weight: bold;"><br><u>Task 5: Rapid Temperature reading</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                 This section is very similar to the previous one. The only difference is that we would sample many more times in the 5 seconds interval (at least 
                                 50 times). The code snippet of Artemis is included below, which is a minimally modified version of the previous function.
                                 <br><br>
                                 </p>
                                 <img class="img-rounded" src="assets/lab2/step5_nano_code.png" alt="step5nanocode" style="width:50%";><br>
                                 <figcaption style="font-size: 16px;"><em>rapid sampling code</em></figcaption>
                                 <br> 
                                 <p style="text-align: left;padding: 0px 30px;">
                                 Then we use the same callback function to receive the rapid readings. We got many of them and some are included below:
                                 <br><br>
                                 </p>
                                 <div class="row" style="text-align: center;">
                                   <div class="column2">
                                     <img src="assets/lab2/step5_pc_1.png" alt="s5pc1" style="width:60%">
                                     <figcaption style="font-size: 16px;"><em>processed output - 1</em></figcaption>
                                   </div>
                                   <div class="column2">
                                     <img src="assets/lab2/step5_pc_2.png" alt="s5pc2" style="width:40%">
                                     <figcaption style="font-size: 16px;"><em>processed output - 2</em></figcaption>
                                   </div>
                                 </div>                             
                              <h4 style="text-align:left;font-weight: bold;"><br><u>Task 6: Limitations</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                 The Artemis board has 384 kB (384,000 bytes) RAM, which is quite limited for data processing if we are always dealing with long strings of data.
                                 Assuming that 100% of the RAM are available for our use, and we are sampling 16-bit (2 bytes) data at a rate of 150Hz for 5 seconds during each interval.
                                 We would generate data size of 2 * 150 * 5 = 1500 Bytes for every interval, which is 1/256 of our total RAM.<br><br>
                                 <b>In other words, we would be able to collect and store 256 groups of such data in the RAM, which is equivalent to 1280 seconds of data collection
                                 before running out of memory.</b>
                                 </p>
                                 <br>
                              <h4 style="text-align:left;font-weight: bold;"><br><u>Extra Task 1: Effective Data Rate</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                 We could calculate the data rate by sending and receiving data with various sizes. For my implementation, I simply used the ECHO command to send strings 
                                 of sizes from 1 to 120 characters. The effective data rate will be calculated by (transmission time - received time) / 2 * data size. Code snippet and 
                                 visualization of the calculated data will be included below:
                                 </p>
                                 <br>                                 
                                 <div class="row" style="text-align: center;">
                                   <div class="column2">
                                     <img src="assets/lab2/E1_1.png" alt="e11" style="width:100%">
                                     <figcaption style="font-size: 16px;"><em>Code for data collection</em></figcaption>
                                   </div>
                                   <div class="column2">
                                     <img src="assets/lab2/E1_2.png" alt="e12" style="width:100%">
                                     <figcaption style="font-size: 16px;"><em>visualization of results</em></figcaption>
                                   </div>
                                 </div>
                                 <br>
                                 <p style="text-align: left;padding: 0px 30px;">
                                  One point I found important is that, in order for the callback function to correctly document data transmission time, we need to append transmission and 
                                  receiving time in lists and calculate the difference later. If we were to use a shared global variable for time calculation, it may be difficult to 
                                  ensure that every timestamp being read in the callback function corresponds to the message's respective transmission time.<br><br>
                                  My observation is that the transmission time is independent from string size. Maybe smaller packets have larger overheads relative to its acutal payload
                                  size, and larger packets have smaller portions of overhead. The conclusion is that sending larger packets will yield larger effective data rate.
                                 </p>
                                 <br>
                              <h4 style="text-align:left;font-weight: bold;"><br><u>Extra Task 2: Reliability</u></h4>
                                 <p style="text-align: left;padding: 0px 30px;">
                                 Reliability is assessed by rapidly sending packets from Artemis and trying to receive them on the PC side. By manually setting the delay interval to 0 in 
                                 the arduino code, we could try to send 1000 packets as fast as we can. From the following screenshot, we can confirm 100% reliability since all packets has 
                                 been received.
                                 </p>
                                 <br>
                                 <div class="row" style="text-align: center;">
                                   <div class="column2">
                                     <img src="assets/lab2/E2_code.png" alt="e2code" style="width:100%">
                                     <figcaption style="font-size: 16px;"><em>Code for sending 1k packets</em></figcaption>
                                   </div>
                                   <div class="column2">
                                     <img src="assets/lab2/E2.png" alt="e2" style="width:100%">
                                     <figcaption style="font-size: 16px;"><em>reliability calculation</em></figcaption>
                                   </div>
                                 </div>    

                              </details>


<!--                          <img class="img-rounded" src="images/penguin.jpg" alt="Generic placeholder image" style="width:20%; text-align: center;"><br>
                              <p>Placeholder image</p> -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- end service -->
      <!--  footer --> 
      <footr>
         <div class="footer">
<!--             <div class="container">
               <div class="row">
                  <div class="col-lg-2 col-md-6 col-sm-12 width">
                     <div class="address">
                        <h3>Address</h3>
                        <i><img src="icon/3.png">Locations</i>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-12 width">
                     <div class="address">
                        <h3>Menus</h3>
                        <i><img src="icon/2.png">Locations</i>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-12 width">
                     <div class="address">
                        <h3>Useful Linkes</h3>
                        <i><img src="icon/1.png">Locations</i>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-12 width">
                     <div class="address">
                        <h3>Social Media </h3>
                        <ul class="contant_icon">
                           <li><img src="icon/fb.png" alt="icon"/></li>
                           <li><img src="icon/tw.png" alt="icon"/></li>
                           <li><img src="icon/lin(2).png" alt="icon"/></li>
                           <li><img src="icon/instagram.png" alt="icon"/></li>
                        </ul>
                     </div>
                  </div>
                  <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 width">
                     <div class="address">
                        <h3>Newsletter </h3>
                        <input class="form-control" placeholder="Enter your email" type="type" name="Enter your email">
                        <button class="submit-btn">Subscribe</button>
                     </div>
                  </div>
               </div>
            </div> -->
            <div class="copyright">
               <p>Copyright 2019 All Right Reserved By <a href="https://html.design/">Free html Templates</a>, modified by Zechen Wang</p>
            </div>
         </div>
      </footr>
      <!-- end footer -->
      <!-- Javascript files--> 
      <script src="js/jquery.min.js"></script> 
      <script src="js/popper.min.js"></script> 
      <script src="js/bootstrap.bundle.min.js"></script> 
      <script src="js/jquery-3.0.0.min.js"></script> 
      <script src="js/plugin.js"></script> 
      <!-- sidebar --> 
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script> 
      <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
      <script src="js/custom.js"></script>
      <script>
         $(document).ready(function(){
         $(".fancybox").fancybox({
         openEffect: "none",
         closeEffect: "none"
         });
         
         $(".zoom").hover(function(){
         
         $(this).addClass('transition');
         }, function(){
         
         $(this).removeClass('transition');
         });
         });
         
      </script> 
   </body>
</html>